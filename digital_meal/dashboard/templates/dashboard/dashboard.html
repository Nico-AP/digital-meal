{% extends "tool/base.html" %}
{% load static django_htmx %}

{% block title %}
  Digital Meal | Admin Dashboard
{% endblock %}

{% block site_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'dashboard/css/dashboard.css' %}">
  <link rel="stylesheet" href="{% static 'reports/css/reports.css' %}">
  <link rel="stylesheet" href="{% static 'website/css/bootstrap/bootstrap-table.min.css' %}">
{% endblock site_css %}


{% block user_nav %}
{% endblock user_nav %}

{% block main_content %}

  <div class="container mt-4">

    <h1 class="mb-4">Admin Dashboard</h1>

    <!-- Classroom Overview -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4 class="mb-0">Classroom Overview</h4>
          </div>

          <div class="card-body">
            <div id="classroom-overview"
                 hx-get="{% url 'dashboard_classroom_overview' %}"
                 hx-trigger="load delay:1s"
                 hx-swap="innerHTML">
              <div class="text-center py-4">
                <div class="row justify-content-center">
                  <div class="col-auto">{% include "reports/components/loader.html" %}</div>
                </div>
                <p class="mt-2 text-muted">Loading classroom overview...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Teacher Overview -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4 class="mb-0">Teachers Overview</h4>
          </div>

          <div class="card-body">
            <div id="teacher-overview"
                 hx-get="{% url 'dashboard_teacher_overview' %}"
                 hx-trigger="load delay:2s"
                 hx-swap="innerHTML">
              <div class="text-center py-4">
                <div class="row justify-content-center">
                  <div class="col-auto">{% include "reports/components/loader.html" %}</div>
                </div>
                <p class="mt-2 text-muted">Loading teacher overview...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Participant Overview -->
    <div class="row mb-5">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4 class="mb-0">Participation Overview</h4>
          </div>
          <div class="card-body">
            <div id="participation-overview"
                 hx-get="{% url 'dashboard_participation_overview' %}"
                 hx-trigger="load delay:1s"
                 hx-swap="innerHTML">
              <div class="text-center py-4">
                <div class="row justify-content-center">
                  <div class="col-auto">{% include "reports/components/loader.html" %}</div>
                </div>
                <p class="mt-2 text-muted">Loading participant statistics...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Exception Overview -->
    <div class="row mb-5">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h4 class="mb-0">Exception Overview</h4>
          </div>
          <div class="card-body">
            <div id="exception-overview"
                 hx-get="{% url 'dashboard_exception_overview' %}"
                 hx-trigger="load delay:2s"
                 hx-swap="innerHTML">
              <div class="text-center py-4">
                <div class="row justify-content-center">
                  <div class="col-auto">{% include "reports/components/loader.html" %}</div>
                </div>
                <p class="mt-2 text-muted">Loading exception overview...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

{% endblock main_content %}

{% block footer_content %}
{% endblock footer_content %}

{% block site_js %}
  {{ block.super }}
  {% htmx_script %}
  <script src="{% static 'website/js/jquery/jquery-3.7.1.min.js' %}"></script>
  <script src="{% static 'website/js/bootstrap/bootstrap-table.min.js' %}"></script>
  <script src="{% static 'website/js/bootstrap-tables-with-htmx.js' %}"></script>

{% endblock %}
